import{r as e}from"../../../../react/index-4878784d.js";import{MotionConfigContext as v}from"../context/MotionConfigContext-1a867db2.js";import{MotionContext as y}from"../context/MotionContext/index-40524376.js";import{useVisualElement as M}from"./utils/use-visual-element-28d1c91d.js";import{useMotionRef as d}from"./utils/use-motion-ref-24c782de.js";import{useCreateMotionContext as L}from"../context/MotionContext/create-dad990de.js";import{loadFeatures as S}from"./features/load-features-1fc38ffc.js";import{isBrowser as w}from"../utils/is-browser-b2773713.js";import{LayoutGroupContext as G}from"../context/LayoutGroupContext-e3eb1a86.js";import{LazyContext as g}from"../context/LazyContext-0b1824d6.js";import{SwitchLayoutGroupContext as R}from"../context/SwitchLayoutGroupContext-24684617.js";import{motionComponentSymbol as P}from"./utils/symbol-34a7f889.js";function J({preloadedFeatures:o,createVisualElement:i,useRender:f,useVisualState:c,Component:m}){o&&S(o);function C(n,x){let u;const r={...e.useContext(v),...n,layoutId:b(n)},{isStatic:s}=r,t=L(n),a=c(n,s);if(!s&&w){t.visualElement=M(m,a,r,i);const E=e.useContext(R),p=e.useContext(g).strict;t.visualElement&&(u=t.visualElement.loadFeatures(r,p,o,E))}return e.createElement(y.Provider,{value:t},u&&t.visualElement?e.createElement(u,{visualElement:t.visualElement,...r}):null,f(m,n,d(a,t.visualElement,x),a,s,t.visualElement))}const l=e.forwardRef(C);return l[P]=m,l}function b({layoutId:o}){const i=e.useContext(G).id;return i&&o!==void 0?i+"-"+o:o}export{J as createMotionComponent};
