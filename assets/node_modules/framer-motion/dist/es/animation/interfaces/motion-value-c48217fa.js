import{secondsToMilliseconds as m}from"../../utils/time-conversion-2fe207ba.js";import{instantAnimationState as T}from"../../utils/use-instant-transition-state-42f0fbd3.js";import{createAcceleratedAnimation as D}from"../animators/waapi/create-accelerated-animation-38d259e4.js";import{createInstantAnimation as u}from"../animators/instant-6e59a11c.js";import{getDefaultTransition as U}from"../utils/default-transitions-7e1107e8.js";import{isAnimatable as p}from"../utils/is-animatable-08e3218b.js";import{getKeyframes as V}from"../utils/keyframes-5d6debf5.js";import{getValueTransition as b,isTransitionDefined as w}from"../utils/transitions-d3c1ed2d.js";import{animateValue as C}from"../animators/js/index-8640110f.js";const L=(n,o,f,a={})=>c=>{const e=b(a,n)||{},l=e.delay||a.delay||0;let{elapsed:s=0}=a;s=s-m(l);const i=V(o,n,f,e),d=i[0],y=i[i.length-1],g=p(n,d),A=p(n,y);let t={keyframes:i,velocity:o.getVelocity(),ease:"easeOut",...e,delay:-s,onUpdate:r=>{o.set(r),e.onUpdate&&e.onUpdate(r)},onComplete:()=>{c(),e.onComplete&&e.onComplete()}};if(w(e)||(t={...t,...U(n,t)}),t.duration&&(t.duration=m(t.duration)),t.repeatDelay&&(t.repeatDelay=m(t.repeatDelay)),!g||!A||T.current||e.type===!1)return u(t);if(o.owner&&o.owner.current instanceof HTMLElement&&!o.owner.getProps().onUpdate){const r=D(o,n,t);if(r)return r}return C(t)};export{L as animateMotionValue};
